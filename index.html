
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VAT Helpline ‚Äì Quality Notes</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="app-header">
    <h1>VAT Helpline ‚Äì Quality Notes</h1>
    <p class="subtitle">VAT Helpline ‚Äî QN</p>
  </header>

  <!-- Intro/Info bubble -->
  <section class="card">
    <details id="introDetails" open>
      <summary class="details-summary">üìò Intro / Info</summary>
      <div class="details-content">
        <p><strong>Opening:</strong></p>
        <p>
          Hello, you on a VAT help line, you talking to
          <span id="introOfficerName">[Name]</span>.<br />
          Can I start with taking your VAT number please?
        </p>
        <p class="hint">Tip: Update your name in <em>Settings</em> so it appears here.</p>
      </div>
    </details>
  </section>

  <!-- Settings (closable) -->
  <section class="card">
    <details id="settingsDetails">
      <summary class="details-summary">‚öôÔ∏è Settings</summary>
      <div class="details-content">
        <div class="grid">
          <!-- Name -->
          <label for="officerName">Your Name</label>
          <div>
            <input id="officerName" type="text" placeholder="Your name" />
          </div>

          <!-- CCEL: Prefix + Number (+/-) -->
          <label for="ccelPrefix">CCEL Ref</label>
          <div>
            <div class="ccel-row">
              <input id="ccelPrefix" type="text" placeholder="Prefix e.g., CCEL-" />
              <div class="stepper">
                <input id="ccelNumber" type="number" inputmode="numeric" step="1" min="0" placeholder="1234" />
                <button id="ccelNumDec" type="button" class="secondary" title="Decrease">‚Äì</button>
                <button id="ccelNumInc" type="button" class="primary" title="Increase">+</button>
              </div>
            </div>
            <p class="small">CCEL is built as <code>PREFIX1234</code> (no hyphen). Use ‚Äì and + to adjust the number by one.</p>
          </div>

          <!-- Webchat ID + include -->
          <label for="webchatId">Webchat ID</label>
          <div>
            <div class="settings-inline">
              <input id="webchatId" type="text" placeholder="Optional Webchat ID" />
              <label class="checkbox-inline">
                <input type="checkbox" id="includeWebchatId" /> Include in notes
              </label>
            </div>
          </div>

          <!-- AUI Ext + include -->
          <label for="auiExt">AUI Ext</label>
          <div>
            <div class="settings-inline">
              <input id="auiExt" type="text" placeholder="Optional AUI extension" />
              <label class="checkbox-inline">
                <input type="checkbox" id="includeAuiExt" /> Include in notes
              </label>
            </div>
          </div>
        </div>

        <!-- Reset Settings -->
        <div class="actions">
          <button id="resetSettingsBtn" class="secondary" type="button">Reset Settings</button>
        </div>

        <p class="small">Settings are auto-saved and persist across sessions. Reset Call does not clear settings.</p>
      </div>
    </details>
  </section>

  <!-- Call Intake -->
  <section class="card">
    <h2>üìù Call Intake</h2>
    <div class="grid">
      <!-- 1. VRN -->
      <label for="vrn">VRN (VAT Registration Number)</label>
      <div class="input-with-copy">
        <input id="vrn" type="text" inputmode="numeric" placeholder="e.g., 123456789" />
        <button class="copy-btn" data-copy-target="vrn">Copy</button>
      </div>

      <!-- 2. Business Name -->
      <label for="businessName">Business Name</label>
      <div class="input-with-copy">
        <input id="businessName" type="text" placeholder="Registered business name" />
        <button class="copy-btn" data-copy-target="businessName">Copy</button>
      </div>

      <!-- 3. Relation -->
      <label for="relation">They relation to the business</label>
      <div class="input-with-copy">
        <select id="relation">
          <option value="">‚Äî Select ‚Äî</option>
          <option>Owner</option>
          <option>Director</option>
          <option>Employee</option>
          <option>Agent</option>
          <option>Other</option>
        </select>
        <button class="copy-btn" data-copy-target="relation">Copy</button>
      </div>

      <!-- Specify when Relation = Other -->
      <label for="relationOther" id="relationOtherLabel" class="hidden">Specify relation</label>
      <div id="relationOtherBlock" class="hidden input-with-copy">
        <input id="relationOther" type="text" placeholder="e.g., Supplier, Landlord, Consultant‚Ä¶" />
        <button class="copy-btn" data-copy-target="relationOther">Copy</button>
      </div>

      <!-- Agent-only block -->
      <div id="agentBlock" class="agent-only">
        <label for="agencyName">Agent company name</label>
        <div class="input-with-copy">
          <input id="agencyName" type="text" placeholder="Agent company name" />
          <button class="copy-btn" data-copy-target="agencyName">Copy</button>
        </div>
        <label for="agencyAddress">Agency address</label>
        <div class="input-with-copy">
          <input id="agencyAddress" type="text" placeholder="Agent address" />
          <button class="copy-btn" data-copy-target="agencyAddress">Copy</button>
        </div>
        <label for="agentRef">Agent Ref</label>
        <div class="input-with-copy">
          <input id="agentRef" type="text" placeholder="Agent reference" />
          <button class="copy-btn" data-copy-target="agentRef">Copy</button>
        </div>
      </div>

      <!-- 4. Caller Name -->
      <label for="callerName">Caller Name</label>
      <div class="input-with-copy">
        <input id="callerName" type="text" placeholder="Person you are speaking to" />
        <button class="copy-btn" data-copy-target="callerName">Copy</button>
      </div>

      <!-- 5. Phone Number -->
      <label for="phoneNumber">Phone Number</label>
      <div class="input-with-copy">
        <input id="phoneNumber" type="tel" placeholder="e.g., +44 1234 567890" />
        <button class="copy-btn" data-copy-target="phoneNumber">Copy</button>
      </div>

      <!-- 6. Security + indicator -->
      <label for="securityResult" class="security-label">
        Security
        <span
          id="securityIndicator"
          class="sec-indicator warn"
          role="img"
          aria-label="Security not passed"
          title="Security not passed"
        >‚úñ</span>
      </label>
      <div class="input-with-copy">
        <select id="securityResult">
          <option value="">‚Äî Select ‚Äî</option>
          <option>Pass</option>
          <option>Fail</option>
        </select>
        <button class="copy-btn" data-copy-target="securityResult">Copy</button>
      </div>

      <!-- PASS reasons -->
      <label id="securityPassLabel" class="hidden">How was security passed?</label>
      <div id="securityPassBlock" class="hidden">
        <div class="checklist">
          <label><input type="checkbox" id="sec_pass_box5" /> Security PASSED box five figure confirmed.</label>
          <label><input type="checkbox" id="sec_pass_edr" /> Security PASSED EDR confirmed.</label>
          <label><input type="checkbox" id="sec_pass_arn" /> Security PASSED ARN confirmed.</label>
          <label><input type="checkbox" id="sec_pass_64_8" /> Security PASSED via vat form 64-8.</label>
          <label><input type="checkbox" id="sec_pass_agent_other" /> Security PASSED agent unable to confirm ARN but confirmed answer to other questions about account.</label>
          <label><input type="checkbox" id="sec_pass_eis" /> Security PASSED via EIS reference</label>
        </div>
      </div>

      <!-- FAIL reasons -->
      <label id="securityFailLabel" class="hidden">Why did security fail?</label>
      <div id="securityFailBlock" class="hidden">
        <div class="checklist">
          <label><input type="checkbox" id="sec_fail_box5" /> Security FAILED unable to confirm box 5 figure.</label>
          <label><input type="checkbox" id="sec_fail_edr" /> Security FAILED unable to confirm EDR.</label>
          <label><input type="checkbox" id="sec_fail_vrn" /> Security FAILED unable to confirm VRN.</label>
          <label><input type="checkbox" id="sec_fail_agent_not_auth" /> Security FAILED agent not authorised.</label>
          <label><input type="checkbox" id="sec_fail_not_auth" /> Security FAILED not authorised.</label>
          <label><input type="checkbox" id="sec_fail_agent_ref_other" /> Security FAILED agent unable to confirm agent ref or answer other questions about account.</label>
        </div>
      </div>

      <!-- 7. Quick Templates (Progress-chasing) -->
      <label for="briefTemplateSelect">Quick Template (Progress chasing)</label>
      <div class="template-row">
        <select id="briefTemplateSelect">
          <option value="">‚Äî Select template ‚Äî</option>
          <option>Deceased Traders (Bereavement)</option>
          <option>Default Surcharge</option>
          <option>De-Registration</option>
          <option>DIY</option>
          <option>Error Correction</option>
          <option>FRS - Flat Rate Scheme</option>
          <option>Group Amendments</option>
          <option>IRU form</option>
          <option>Variations</option>
          <option>VAT Ledger Breakdown</option>
          <option>VAT Written Enquiry</option>
          <option>VAT 68 (COLE/TOGC)</option>
          <option>VAT915</option>
          <option>64-8 processing</option>
          <option>Payment Allocation (IPP)</option>
          <option>Penalty appeals</option>
          <option>Registration</option>
          <option>Reinstatements</option>
          <option>Repayment</option>
          <option>Tracing Unit 309</option>
        </select>
        <label class="checkbox-inline">
          <input type="checkbox" id="briefTemplateAppend" />
          Append
        </label>
        <button id="applyTemplateBtn" class="primary" type="button">Insert</button>
        <button id="clearTemplateBtn" class="secondary" type="button">Clear</button>
      </div>

      <!-- 8. Brief -->
      <label for="brief">Brief ‚Äî What they wanted? What you did?</label>
      <div class="input-with-copy">
        <textarea id="brief" rows="4" placeholder="Short summary of request and actions taken"></textarea>
        <button class="copy-btn" data-copy-target="brief">Copy</button>
      </div>
    </div>

    <div class="actions">
      <button id="resetBtn" class="secondary" type="button">Reset Call</button>
    </div>
    <p class="small">Reset clears the call fields and notes. Settings stay intact.</p>
  </section>

  <!-- Notes Output -->
  <section class="card">
    <h2>üßæ Notes</h2>

    <div class="note-block">
      <div class="note-header">
        <h3>CCEL Note (detailed)</h3>
        <div class="note-actions">
          <button class="copy-note" data-note="ccel">Copy CCEL Note</button>
        </div>
      </div>
      <textarea id="ccelNote" rows="10" readonly class="mono"></textarea>
    </div>

    <div class="note-block">
      <div class="note-header">
        <h3>AUI Note (simplified)</h3>
        <div class="note-actions">
          <button class="copy-note" data-note="aui">Copy AUI Note</button>
        </div>
      </div>
      <textarea id="auiNote" rows="8" readonly class="mono"></textarea>
    </div>

    <p class="small">
      All calls are digitally recorded. To request a copy of this call please email <strong>DL-CC Head Office Quality</strong>.
    </p>
  </section>

  <footer class="app-footer">
    <p>Made for local use ‚Äî no data leaves your browser.</p>
  </footer>

  <script src="script.js"></script>
</body>
</html>

